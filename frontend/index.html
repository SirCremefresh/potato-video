<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>The Potato Quality Stream</title>
	<meta name="description" content="Potato Quality Streaming">
	<meta name="author" content="Donato Wolfisberg">

	<!--	<link rel="stylesheet" href="css/styles.css?v=1.0">-->
	<style>
        body {
            margin: 0;
            font-family: sans-serif;
        }

        .sign-up {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: black;
        }

        .sign-up #title {
            text-align: center;
            color: white;
            height: 120px;
            margin: 0;
            animation: myanim 5s infinite;
            font-size: 40px;
        }

        @keyframes myanim {
            0% {
                font-size: 40px;
            }
            50% {
                font-size: 80px;
            }
        }

        .sign-up .sign-up-label {
            align-self: center;
            color: white;
            margin: 10px;
        }

        .sign-up .sign-up-label input {
            display: block;
        }

        .sign-up .sign-up-button {
            width: 80px;
            align-self: center;
            color: white;
            background: black;
            border: 1px solid white;
            font-weight: bold;
            height: 40px;
        }
	</style>
</head>

<body>
<div id="content">
</div>

<script>
  document.addEventListener('DOMContentLoaded', async function () {
    const contentElement = document.getElementById('content')
    console.log(contentElement.innerHTML)
    showPageSignUp(contentElement)
  });

  async function showPageSignUp(contentElement) {
    contentElement.innerHTML = `
<div class="sign-up">
	<h1 id="title">Potato Stream</h1>
	<label class="sign-up-label">
		Username
		<input type="text" id="sign-up-username-input">
	</label>
	<button class="sign-up-button" id="sign-up-button">sign in</button>
</div>
    `

    const signUpButton = document.getElementById('sign-up-button');
    signUpButton.addEventListener('click', () => {
      const inputEl = document.getElementById('sign-up-username-input');
      console.dir(inputEl.value)
    })

    await sleep(3000)
    await writeWithDelay('', 'Are you Ready?', 'title', 170);
    await sleep(3000)
    await writeWithDelay('', 'For the Stream of your Live!', 'title', 170);
    await sleep(3000)
    await writeWithDelay('', 'Next Weekend!!', 'title', 170);
    await sleep(3000)
    await writeWithDelay('', 'Potato Stream', 'title', 170);
  }

  function writeWithDelay(before, text, elementId, timeout, returnRes = null) {
    let res, promise;

    if (returnRes === null) {
      promise = new Promise(resolve => res = resolve)
    } else {
      res = returnRes;
    }
    if (text && text.length > 0) {
      setTimeout(() => {
        before += text.charAt(0);
        const element = document.getElementById('title');
        if (element === undefined) {
          return;
        }
        element.innerText = before;
        writeWithDelay(before, text.slice(1), elementId, timeout, res)
      }, timeout);
    } else {
      res();
    }
    return promise;
  }

  function sleep(timeout) {
    return new Promise(resolve => setTimeout(resolve, timeout))
  }
</script>
</body>
</html>
